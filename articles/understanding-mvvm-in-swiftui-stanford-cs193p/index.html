<!doctype html><html lang=en><head><title>Understanding MVVM in SwiftUI (Stanford CS193p) ::
riceset
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MVVM is a design paradigm that stands for Model-View-ViewModel.
Model It is completely UI independent (simple swift files) Contains the data + logic View A reflection of the current state of the model Declarative (the view is determined by what body returns) ViewModel Binds the View to the Model so that changes in the model cause the view to get rebuilt Example: gets data from a SQL database and puts it into an array It constantly looks for changes in the model and publishes &amp;rsquo;to everyone&amp;rsquo; that something has changed Can modify the model Applying MVVM in Memorize Model Now let&amp;rsquo;s return to coding Memorize."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://riceset.com/articles/understanding-mvvm-in-swiftui-stanford-cs193p/><link rel=stylesheet href=https://riceset.com/assets/style.css><link rel=stylesheet href=https://riceset.com/style.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="/browserconfig.xml"><meta name=theme-color content="#ffffff"><link href=https://riceset.com/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://riceset.com/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://riceset.com/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://riceset.com/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://riceset.com/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://riceset.com/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Understanding MVVM in SwiftUI (Stanford CS193p)"><meta name=twitter:description content="MVVM is a design paradigm that stands for Model-View-ViewModel."><meta property="og:title" content="Understanding MVVM in SwiftUI (Stanford CS193p)"><meta property="og:description" content="MVVM is a design paradigm that stands for Model-View-ViewModel."><meta property="og:type" content="article"><meta property="og:url" content="https://riceset.com/articles/understanding-mvvm-in-swiftui-stanford-cs193p/"><meta property="article:section" content="articles"><meta property="article:published_time" content="2023-12-19T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-19T00:00:00+00:00"></head><body><div class=container><header class=header><span class=header__inner><a href=https://riceset.com/ class=logo style=text-decoration:none><span class=logo__text>ğŸš riceset</span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://github.com/riceset>GitHub</a></li><li><a href=/index.xml>RSS</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://github.com/riceset>GitHub</a></li><li><a href=/index.xml>RSS</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle menu__inner--desktop"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Understanding MVVM in SwiftUI (Stanford CS193p)</h1><div class=post-meta><span class=post-author>Written by Komeno</span></div><span class=post-tags><a href=https://riceset.com/tags/swiftui/>#SwiftUI</a>&nbsp;
<a href=https://riceset.com/tags/stanford/>#Stanford</a>&nbsp;</span><figure class=post-cover><img src=https://riceset.com/images/mvvm.png alt="Understanding MVVM in SwiftUI (Stanford CS193p)"></figure><div class=post-content><p>MVVM is a design paradigm that stands for <em>Model-View-ViewModel</em>.</p><h3 id=model>Model</h3><ul><li>It is completely UI independent (simple swift files)</li><li>Contains the <strong>data</strong> + <strong>logic</strong></li></ul><h3 id=view>View</h3><ul><li>A reflection of the current state of the model</li><li>Declarative (the view is determined by what <code>body</code> returns)</li></ul><h3 id=viewmodel>ViewModel</h3><ul><li>Binds the View to the Model so that changes in the model cause the view to get rebuilt</li><li>Example: gets data from a SQL database and puts it into an array</li><li>It constantly looks for changes in the model and publishes &rsquo;to everyone&rsquo; that something has changed</li><li>Can modify the model</li></ul><h2 id=applying-mvvm-in-memorize>Applying MVVM in Memorize</h2><h3 id=model-1>Model</h3><p>Now let&rsquo;s return to coding Memorize. We are going to define our model for this memory game as the following struct:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>MemoryGame</span>&lt;CardContent&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> cards: Array&lt;Card&gt;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Card</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> isFaceUp: Bool = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> isMatched: Bool = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> content: CardContent
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here we are declaring an array of cards and defining the <code>Card</code> type below as a struct. The content of the <code>Card</code> is going to be a generic and we have to specify what variable type we want it to be when using the <code>MemoryGame</code> struct (just like when using an array e.g. <code>Array&lt;Int></code>)</p><p>We are also setting a default value for <code>isFaceUp</code> and <code>isMatched</code> for the <code>Card</code> struct so we don&rsquo;t have to set it every time.</p><p>Now we can create an initializer for this model. It gets the number of pairs of cards
as a parameter and creates cards for us.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>init</span>(numberOfPairsOfCards: Int) {
</span></span><span style=display:flex><span>	cards = Array&lt;Card&gt;()
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Observation: When we create our own initializer we are going to have to initialize all variables being used inside the struct by ourselves.</p><p>Now let&rsquo;s create a <code>for</code> loop to add cards to our array:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>for</span> pairIndex <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;numberOfPairsOfCards {
</span></span><span style=display:flex><span>	cards.append(content: ???)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>here we are using pairIndex (something like <code>i</code> in C) and looping numberOfPairsOfCards times where on each iteration we are appending a newly created card to our <code>cards</code> array.</p><p>The problem here is that we don&rsquo;t have our content yet. To solve this let&rsquo;s create a function called <code>createCardContent()</code> that receives <code>pairIndex</code> and returns <code>CardContent</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>for</span> pairIndex <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;numberOfPairsOfCards {
</span></span><span style=display:flex><span>	cards.append(content: createCardContent(pairIndex))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Passing this function as a parameter in the initializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>init</span>(numberOfPairsOfCards: Int, createCardContent: (Int) -&gt; CardContent)
</span></span></code></pre></div><h3 id=viewmodel-1>ViewModel</h3><p>The ViewModel is defined as a class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmojiMemoryGame</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> model = MemoryGame&lt;String&gt;(numberOfPairsOfCards: <span style=color:#ae81ff>4</span>,
</span></span><span style=display:flex><span>	 createCardContent: { (index: Int) -&gt; String <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;ğŸ‘»&#34;</span>
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>here we can use our model defining it as a private variable (making it only accessible from this class). Then we assign it to a <code>MemoryGame</code> instance and set <code>CardContent</code> type to a string. Then initialize it with 4 pairs of cards and pass a function to create the contents of the cards.</p><p>As Swift already knows the types for the input and output for this function because it was specified in the model we can simplify this function removing the types for the input and output and even remove the <code>return</code> statement and parenthesis:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> model = MemoryGame&lt;String&gt;(numberOfPairsOfCards: <span style=color:#ae81ff>4</span>,
</span></span><span style=display:flex><span>	createCardContent: { index <span style=color:#66d9ef>in</span> <span style=color:#e6db74>&#34;ğŸ‘»&#34;</span> })
</span></span></code></pre></div><p>As <code>createCardContent</code> is the last parameter we can simplify it like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> model = MemoryGame&lt;String&gt;(numberOfPairsOfCards: <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>	index <span style=color:#66d9ef>in</span> <span style=color:#e6db74>&#34;ğŸ‘»&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Since we are not using the <code>index</code> variable we can omit it too:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> model = MemoryGame&lt;String&gt;(numberOfPairsOfCards: <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>_</span> <span style=color:#66d9ef>in</span> <span style=color:#e6db74>&#34;ğŸ‘»&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=using-static>Using static</h4><p>Let&rsquo;s try to insert the emojis array into our ViewModel:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> emojis: [String] = [<span style=color:#e6db74>&#34;ğŸš—&#34;</span>, <span style=color:#e6db74>&#34;ğŸš•&#34;</span>, <span style=color:#e6db74>&#34;ğŸš™&#34;</span>, <span style=color:#e6db74>&#34;ğŸšŒ&#34;</span>]
</span></span></code></pre></div><p>Now let&rsquo;s assign an emoji indexed from this array to the contents of our card:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> model = MemoryGame&lt;String&gt;(numberOfPairsOfCards: <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>	pairIndex <span style=color:#66d9ef>in</span> emojis[pairIndex]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>But we cannot initialize a property (e.g. let, var) with a value that depends on another property because the order of initialization of properties is random.</p><p>To solve this we can use an initializer to explicitly set the order of initialization of our properties, make the <code>emojis</code> constant global or as a better option we can make it <code>static</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>let</span> emojis: [String] = [<span style=color:#e6db74>&#34;ğŸš—&#34;</span>, <span style=color:#e6db74>&#34;ğŸš•&#34;</span>, <span style=color:#e6db74>&#34;ğŸš™&#34;</span>, <span style=color:#e6db74>&#34;ğŸšŒ&#34;</span>]
</span></span></code></pre></div><p>Using type variables (e.g. <code>static var</code>, <code>static let</code>) and type functions (<code>static func</code>) makes them &lsquo;global&rsquo; to all instances of this class. So in contrast to a normal variable that would get created on each instance, a type variable or type function will be created only once and referenced from other instances.</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Other Posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://riceset.com/articles/mastering-mandarin-chinese-with-anki/><span class=button__text>Previous</span>
<span class=button__icon>â†’</span></a></span></div></div></div></div><footer class=footer><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><div class=footer__inner><div class="copyright copyright--user">Â© 2023 riceset</div></div></footer><script src=https://riceset.com/assets/main.js></script><script src=https://riceset.com/assets/prism.js></script></div></body></html>